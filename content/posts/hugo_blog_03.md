---
title: "[Hugoブログ03]記事更新する際の手順"
date: 2021-01-11T09:46:35+09:00
lead: "記事更新手順の備忘録と記事テンプレートの修正方法"
categories:
  - "Hugoブログ"
tags:
  - "clip_ブログ投稿"
---

## はじめに
今回は、記事更新のやり方について。
テーマのカスタマイズについては少し長くなるので、次回から何回かに分けての更新になりそうです。

## （備忘録）基本的な記事更新手順
まずは記事となるmdファイルを作成するパス名を指定して、`hugo new`コマンドでファイル作成。  
パス名は`content`以下の相対パスで指定します。今回`content/posts/article01.md`というマークダウンファイルを作ります。  

今後、記事を更新したい場合も基本的にこの手順で大丈夫そうです。

```bash
hugo new posts/article01.md
# hugo new <パス名.md>
```

ここにマークダウンで何か色々書いて、ブログ記事を作成します。

次にローカルで確認したい場合は、ローカルサーバー起動して出てくるローカル専用のURLをブラウザで開けば、見ることができます(Ctrl+C でコマンドラインに戻る)
```bash
hugo server -D #-Dオプションでdraft記事も見れる
```

ブログ記事をWebに公開して見られる状態にしたい場合は、ビルドしてGitHubにプッシュします。  
URLは`https://<GitHubユーザー名>.github.io/<リポジトリ名>/`というURLでした。反映するまで少しタイムラグがあるので注意です。
```bash
hugo #ビルド

git add .
git commit -m "<コミットメッセージ>"
git push origin main
```

僕はコミットメッセージには、単純な記事更新ならその日の日付、Hugoブログ自体の設定をいじったりした時は設定したこと書くようにしています（とはいえ結局一人開発なので、コミットメッセージは結構適当に書いてしまいます...）


## 公開した記事が表示されない場合
公開したはずの記事が出てこないという場合は、下書きの状態（ドラフト）になっていないかをチェック。  
mdファイルの上の`---`で囲まれたヘッダー情報部分（フロントマターと呼びます）に`draft: true`と入っているのを、`false`に指定するか行を削除すると公開されます。

また、最初に記事を作成した時に`posts`のようなサブディレクトリを作ってそこにマークダウンファイルを入れましたが、ベストなディレクトリ構造についてはテーマごとに違うよう気がします。もし記事が出てこない場合、`content`直下のディレクトリに変えたり、他のディレクトリがあるならそちらに入れてみたり、色々試してみる余地はあると思います。

テーマのサンプルのファイル構造を調べることもできます。  
`themse/<テーマを入れた時のディレクトリ名>/exampleSite/content`以下を探して参考にしてみると良いかもしれません。


## 記事テンプレートの修正
`archetypes/default.md`を開くと、以下のような記事作成時のテンプレートが入っています。
`hugo new <パス名.md>`で記事を作成した時に、自動でこの内容が入ったmdファイルが作成されるようです。

```md
---
title: "{{ replace .Name "-" " " | title }}"
date: {{ .Date }}
draft: true
---
```

`{{}}`で囲まれた部分は置き換わる部分かと思うので触らないようにして、それ以外にあらかじめ作成したい記事のテンプレートをここに色々書くことができます。  
僕は以下のようなテンプレートを作りました。

```md
---
title: "{{ replace .Name "-" " " | title }}"
date: {{ .Date }}
lead: "description"
categories:
  - "category"
draft: true
---
## はじめに
## 1
## 2
## おわりに
---
## MEMO
```

特にヘッダー部分、フロントマターと呼ばれる部分に記述しておくことで、色々と記事の設定をすることができます（最後に参考URL）


## おわりに
困ったらひとまず「テーマのサンプルページの構造を見る」と解決策のヒントが見つかるかもしれないな、と思いました。  
各テーマにはそれぞれのベストプラクティスがありそうです。

今回でひとまず記事更新ができる形になりました。  
ですがまだ見た目が整っていないので、次回からHugonの構造を理解しながらカスタマイズを行って行きたいと思います。テーマは僕の使っている「[Mainroad](https://github.com/vimux/mainroad/)」でやっていきます。

---
## MEMO
- 記事のフロントマターの書き方  
[Hugoで記事を書く方法(フロントマター編) - たかけんテックラボ](https://takaken.tokyo/dev/hugo/post/write-post/)

- テーマ「Mainroad」公式  
[GitHub - Vimux/Mainroad: Responsive, simple, clean and content-focused Hugo theme based on the MH Magazine lite WordPress theme](https://github.com/vimux/mainroad/)