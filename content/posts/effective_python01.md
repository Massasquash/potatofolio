---
title: "「Effective python第２版」"
date: 2021-01-20T09:26:50+09:00
lead: "description"
categories:
  - "category"
draft: true
---

# はじめに
この記事は「Effective Python 第二版」を学習していく備忘録です。
「初級から中級へ」というテーマで、

新しく知ったことや、使えそうなテクニックだなと感じた内容をまとめていきたいと思います。
「理解して」「使える」と言うところを目指します。

Jupyter Notebook上でし実行しながら練習しています。

## １章 Pythonic思考
（まえがき xii より引用）
>Pythonコミュニティでは、特定のスタイルに沿ったコードを表すのにPythonicという形容詞を使います。Pythonのイディオムは、この言語を使い仲間と作業する経験から時間をかけて発展してきました。１章では、Pythonで最も中心的な共通的に使われる最良の方法を扱います。

（目次）
項目1 使用するPythonのバージョンを知っておく
項目2 PEP 8スタイルガイドに従う
項目3 bytesとstrの違いを知っておく
項目4 Cスタイルフォーマット文字列とstr.formatは使わずf 文字列で埋め込む
項目5 複雑な式の代わりにヘルパー関数を書く
項目6 インデックスではなく複数代入アンパックを使う
項目7 rangeではなくenumerateを使う
項目8 イテレータを並列に処理するにはzipを使う
項目9 forループとwhileループの後のelseブロックは使わない
項目10 代入式で繰り返しを防ぐ

### 項目1 使用するPythonのバージョンを知っておく
#### まとめ
Python3.8が2019年10月にリリースされてから、多くの構文が導入されました。
Python2は2020年1月にサポートがなくなり、さらに2020年4月に使用期限が終わり公式な保守が行われなくなりました。自己責任で使うことはできますが、Python2の利用は避けましょう。
Python3をプロジェクトに使っていきましょう。

### 解説
使用しているPythonのバージョンを調べる方法は
（１）コマンドラインで調べる方法
（２）Python実行時（Jupyter Notebookのセル上で）調べる方法

（１）の方法は、ターミナルで
```bash
$ python --version  #-> Python 2.7.10
$ python3 --version #-> Python 3.8.0
```

（２）
```python
import sys
print(sys.version_info)
print(sys.version)
```

### 感想
言語自体もプログラミングで作られています。
Pythonはオープンソースなので、裏側でコミュニティの皆さんが保守管理してくれているため、僕らは安心してPythonでプログラミングを書くことができています。
よりよくなるようにバグの改善、セキュリティ向上を続けているので、しっかりと「サポートが受けられているバージョン」をプロジェクトに使っていくのが良さそうです。



### 項目2 PEP 8スタイルガイドに従う
Pythonのコードを書くときは[PEP8スタイルガイド](https://pep8-ja.readthedocs.io/ja/latest/)に従うと良いが、コミュニティや開発メンバーの中で共通スタイルを共有しておくことで、協働作業が捗ります。
自分だけのコードの場合でも、一貫したスタイルで書くことで後から修正しやすくなります。

### 解説
PEP8は「Pythonのコードをどのようにフォーマットするかのスタイルガイド」です。どのようにコードを書けば良いか？が整理されています。

一部を挙げてみます。

（１）空白
- インデントにはタブではなく4個のスペースを使う
- 各行は、長さを79文字までとする
- ファイルでは、関数とクラスは空白２行で分ける
- 変数代入の前後には、空白を１つ、必ず１つだけを置く
  （良い例 `hoge = 'huga'` ／悪い例 `hoge=     huga`）
- 辞書では、キーとコロンの間には空白を置かず、同じ行に値を書く場合には値の前に空白を１つ置く
  （良い例`{key: value}}` ／悪い例`{key:value}`, `{key :value}`）

１行の長さに制限があるのは、エディタで80文字で折り返す際に改行されないようにするため、とのことです。今は「強く推奨」から「推奨」くらいに落ちているみたいですね。
長さ調整には（３）の括弧を使うテクニックが役に立ちます。

（２）変数名の付け方
- 関数・変数・属性は、小文字のスネークケース （例 `lowercase_underscore`）
- モジュールでの定数は、大文字のスネークケース （例 `ALL_CAPS`）

「モジュールでの定数」と言うのは、モジュール全体から呼び出せるファイルの一番頭に描いておく定数値でですね。


（３）式と文
- 式の否定（`if not a is b`）ではなく、内側の項の否定（`if a is not b`）を使う
- コンテナやシーケンスの長さ（`if len(somelist) == 0`）を使って、空値（`[]`や`''`など）かどうかをチェックしない。`if not somelist`を使って、空値が暗黙にFalseと評価されることを使う
- 式が1行に治らない場合は、括弧でくくって複数行にして、読みやすいようにインデントする
- `\`で行分けするよりは、括弧を使って複数の指揮を囲む方が良い

（４）インポート
- import文は常にファイルの先頭におく
- インポートは、①標準ライブラリモジュール、②サードパーティモジュール、③自分の作成したモジュール、の順に行う。それぞれの部分では、アルファベット順にインポートする



### 感想
上で挙げたのは、効果の出やすそうなものです。

基本を学ぶことで「とりあえず正しく動くコードの書き方」を身に着けることができたら、次のステップとして「保守管理しやすいコードの書き方」
「リーダブルコード」がプログラミング全般における考え方を学ぶとしたら、「PEP8」でその考え方をPythonで実践する、と言う感じで捉えても差し支えないかと思っています。




## 項目3 bytesとstrの違いを知っておく


## （コラム）assert文について
書籍に一貫して出てくるのが`assert`文です。
変数が目的の値を取っているかどうかを確認するのに使用しています。



# おわりに


---
## MEMO
- こちらも合わせて参考にさせていただいています。
[『Effective Python 第2版』 第1章＜Pythonic思考＞ - Qiita](https://qiita.com/takadowa/items/44db07e227a58287b193)

ーPEP8スタイルガイド
[はじめに — pep8-ja 1.0 ドキュメント](https://pep8-ja.readthedocs.io/ja/latest/)


- リーダブルコード


- なぜ79文字化
https://python.ms/pep7/#_1-%E8%A1%8C%E3%81%8B%E3%82%99-79-%E6%96%87%E5%AD%97%E4%BB%A5%E5%86%85%E3%81%A6%E3%82%99%E3%81%82%E3%82%8B%E7%90%86%E7%94%B1
---