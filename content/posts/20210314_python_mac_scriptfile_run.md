---
title: "[Python]Macでスクリプトをダブルクリックで実行できるようにする"
date: 2021-03-14
lead: ".pyファイルのターミナルからの実行方法とダブルクリックで実行する設定方法について整理"
categories:
  - "Python"
---


## はじめに
制作したPythonスクリプトのツール化。  
ファイルのダブルクリックでスクリプトを実行するように設定します。  
調べれば出てくる情報ではありますが、備忘録としてまとめておくことにしました。

環境はMac + Python3 です。
Python3のインストールは済んでいる状態が前提となっています。
Windows環境だったりPython2を使用する場合はこの方法では実現できないと思うのでご注意ください。

また、MacでPython3インストール状態であっても、インストールのやり方によっては今回使用する **「Python Launcher 3.app」** が使えない場合があるようです。



## 1.Pythonスクリプトのターミナルでの起動方法
本題に入る前に、Pythonスクリプト（.pyファイル）の基本的な起動の方法について整理しておきます。  

Macならターミナルを起動し、
```
$ python3 <.pyファイルの絶対パス>
```

このコマンドを実行するとスクリプトが起動します。
ターミナルに`python3`と半角スペースを1つ入れた後に、実行したい.pyファイルをターミナル上にドラッグ&ドロップすると、自動で絶対パスが入力されるので便利です。

このやり方で十分ですが、仮に絶対パスを使わずファイル名で実行する場合は、カレントディレクトリをその.pyファイルのあるディレクトリにしておく必要があります。

```
$ cd <.pyファイルがあるフォルダのパス>
$ python3 <.pyファイル名>
```

ディレクトリのパスの調べ方は、Finderで該当のディレクトリの上で右クリックしてメニューを表示した状態でoptionキーを押すと、押している間だけ「"xxx"をコピー」 -> 「"xxx"のパス名をコピー」に変わっているので、それを選択することでコピーすることができます。

## 2. Pythonスクリプトをダブルクリックで実行できるように設定する
Finderで.pyファイルを右クリックして出てくるメニューから「情報を見る」
<br>
![image](/img/posts/20210314_python_mac_scriptfile_run/1.png)

「このアプリケーションで開く」を展開
<br>
![image](/img/posts/20210314_python_mac_scriptfile_run/2.png)

「Python Launcher3」を選択
<br>
![image](/img/posts/20210314_python_mac_scriptfile_run/3.png)

これで、スクリプトファイルをダブルクリックで実行できるようになっています。

試しにスクリプトファイルをダブルクリックしてみると、Docにロケットみたいなアイコンが出現しているはずです。
![image](/img/posts/20210314_python_mac_scriptfile_run/5.png)


「ランチャーアプリは立ち上がってるけどスクリプト実行が上手くいかない」というような場合、自分の環境だと以下の設定の見直しを行うと上手くいきました。

### Python3 Launcher 3の設定の見直し
ダブルクリックした際に、以下のような「Python3 Launcher 3」の設定ダイアログが出現しているはず。
<br>
![image](/img/posts/20210314_python_mac_scriptfile_run/4.png)

どうにもスクリプトがうまく動作しないな...という時は、こちらをチェックしてみると良いかもしれません。  

- 「Interpreter」がPython3のパスになっているか

自身のPCにインストールされているPython3のパスになっているかチェックします。
ここで設定するのは要するにPython3を実行するためのスクリプトがどこに保存されているかを示した場所で、ターミナルで`$ which python3`コマンドでPython3のパスが確認できます。
このパスが異なっていると、Python3コマンドが実行できないためそのスクリプトファイルの実行自体ができません。

- 「Run in a Terminal window」のチェックを外す

僕の環境だとこのチェックがついたままだとちゃんとスクリプトが実行されませんでした（あまり理屈は理解できていません）。



## おわりに
いくつかメモ。

- エイリアスでの実行

スクリプトファイルのエイリアスをデスクトップに作成して、それをダブルクリックで実行できるようにしました。  
本体のスクリプトファイルが上手く実行できるようなら、エイリアスにしても問題なく実行できているようです。

- 仮想環境を作ってスクリプト作成しているのでその影響は？

現在はvenvで仮想環境を作り、必要なライブラリのインストールはその仮想環境内で行っています。仮想環境に入らないとライブラリが使えないため、なんだか直感的にはただダブルクリックするだけだと実行できないような気がしていましたが、現実的には問題なく実行できています。  
何か根本的に理解不足な気がするので、この辺りの仕組みを知りたいです。
