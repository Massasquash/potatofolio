---
title: "[Hugoブログ01]構築をはじめる"
date: 2021-01-08
lead: "Hugo導入からテーマ選定、ローカルでの表示まで"
categories:
  - "Hugoブログ"
---

# はじめに
Hugoという静的サイトジェネレータを使って、ブログを構築してみました。

導入の目的としては、
- 学習・開発の履歴を残すため気楽にアウトプットできる場所を作りたい
- そのままポートフォリオとしても使えるもの
- ローカルで、かつMarkdownで書ける気軽さを重視

以前にHugoとPelicanを比較して試した経緯があったので、今回の構築を始める前にHugoのインストールは済んでいました。もし初期設定から行いたくて読んでいただいている場合は、他のページを参考にしていただくのが良いかもしれません。

導入する際に使った参考書は、以前に技術書店で購入したコチラ。  
コマンドライン操作など何も知らず取り組むのは辛いですが、知識を整理するためにとても良いなと思った書籍です。  
[Hugo で始める静的サイト構築入門~静的サイトジェネレーターで作る自作サイト~ - tucca - BOOTH](https://booth.pm/ja/items/2368187)

こちらのブログもわかりやすくて参考にしました。 
[Hugoでgh-pagesにブログを作ってみた · var StraySheep](http://straysheep3.github.io/post/hugo-gh-pages-blog-create/)


## （コラム）Hugoとは？
静的サイトジェネレータ（Static Site Generator）というツール。Go言語で実装されている。他の方が制作したテーマを使ってブログが作成できて、記事を書く時はローカルの使い慣れたエディタを使ってMarkdown形式で書くことができる。ただ、ネットワークの知識やターミナル操作に慣れていないと導入が難しい。

# 実装
## Hugoのインストール・アップデート
Hugoを導入していきます。  
インストールはMacの場合はHomebrewで行います。
```bash
$ brew install hugo
```

今回実際にはインストールが済んでいたので、Hugoアップデートから行いました。  

```bash
$ hugo version  // バージョン確認
$ brew upgrade hugo  // アップデートするコマンド
```

参考
[Hugoのアップデート方法 | B-log](https://beacats.com/how_to_update_hugo/)

### サイトの構築
Hugoのインストールが終わったら、サイトの構築スタートです。  
`cd`でサイトを制作したいリポジトリに入って

```
$ hugo new site <site-name>
```

これで`site-name`というディレクトリ直下にサイトの元となるディレクトリ・ファイル群がズラーっと作られます。


### テーマ選びと設定
ブログのテーマを選んで設定していきます。以下にテーマが一覧で載っています。  
[Complete List | Hugo Themes](https://themes.gohugo.io/)

今回この中から「[Mainload](https://github.com/vimux/mainroad/)」というテーマを使わせていただくことにしました（選んだ理由は後述）。  
先ほど作ったディレクトリ直下の`themes`ディレクトリに、githubのリモートリポジトリからテーマをクローンします。

```bash
$ cd themes
$ git clone https://github.com/Vimux/Mainroad.git mainroad
$ rm -rf mainroad/.git
```

こんな感じでテーマを入れます。
参考にした書籍によると、`git submodule`コマンドは理解せず使うとハマりがちなので、`git clone`で入れるようにするのが良さそうでした。

最後のコマンドで、cloneでした時についてくるgitを削除していますね。

次に、`config.tomi`に、

```tomi
theme = "mainroad"
```

と記述します。この`mainroad`は、themesディレクトリにクローンしてきた際に作ったディレクトリ名になります。


### ローカルで出力
これでひとまず、ローカルで確認できるはずです。
`pdw`コマンドで`config.toml`のあるディレクトリにいることを確認してから、以下のコマンド。
（うっかりテーマのディレクトリに移動した状態のままコマンド実行して「出来ない！」となったりするので注意です）

```bash
$ hugo server -D
```

この`-D`オプションは、ドラフト状態の記事も表示させる、というオプションらしいです。  
ターミナルに出力されている`http://localhost:1313`のようなアドレス（ローカルサーバーのURL？）をChromeなどブラウザで開くと、ひとまず表示させることができています。

また、 Ctrl+C でコマンドラインに戻ることができます。そうするとローカルサーバーが立ち上がっていない状態になるので、ブラウザでは見られなくなります。


## （コラム）テーマ選びで考えたこと
どんなブログにしたいかでテーマ決めをしましたが、数が多くどれも魅力的で結構悩みます。

最初はブログ形式というよりはドキュメント形式みたいなのが良いなと思っていました。検索性を良くしたかったです。  
ただ選んでいくうちに、ブログ形式の方が気持ち的に気楽に更新できるだろうと思って、「読み方がドキュメント形式に近いブログ形式」（伝わりますかね？）で検索性の良いものを探すことにしました。

欲しい機能を洗い出すと、

- カテゴリ機能があり、カテゴリが一覧で常に表示される（プロジェクトごとにカテゴリで管理したいため）
- 検索バーは欲しい

このくらいでした。後からカスタマイズもできますが、あまり難しいカスタマイズは自信がなかったので、この辺りがでもページにも載っていて実装しやすいものにしました。最終的な決め手は

「設定のサンプルコードをそのまま使ってある程度形になっている」「カスタマイズの情報が詳しく書かれているページを見つけた」

というところかもしれません。

# おわりに
今回はここまで。
今後、Github pagesを使って公開したり、テーマをカスタマイズしていったりします。

---
## MEMO
調べていて気になった・言語化しておきたい用語など
- 静的サイト
- ループバックアドレス/localhost
---